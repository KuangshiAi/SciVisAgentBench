# Figure Recreation Tests for napari-mcp
# These tests evaluate the agent's ability to recreate scientific figures from papers
# Focus: Loading data, applying appropriate visualization settings, and matching target figures

#Test: Recreate a figure from a dataset. 
- vars:
    question: |
      1. Load the dataset into napari: data/dataset_001/dataset_001.tiff
      2. Read the target figure: data/dataset_001/dataset_001.png but don't load it into napari.
      3. Read the dataset description: data/dataset_001/dataset_001.yaml. 
      4. Set the same colormaps and blending modes as the target figure.
      5. Adjust contrast and gamma as needed to match the target figure.
      6. Take a screenshot of your recreation.
      7. If the recreation does not match the target figure, adjust the visualization settings and take a screenshot again.
      8. Stop when the recreation matches the target figure or you have tried five different visualization settings.
      9. Save the final screenshot to "eval_figure_recreation/screenshot.png".
  assert:
    - type: llm-rubric
      subtype: vision
      value: |
          1. Does the result screenshot look similar to the ground truth image?
          2. Are the same colormaps and blending modes used as in the target figure?
          3. Is the contrast and gamma adjusted to match the target figure?
      gs-file: GS/dataset_001.png
      rs-file: eval_figure_recreation/screenshot.png                 
  options:
    cache: false
    runSerially: true
