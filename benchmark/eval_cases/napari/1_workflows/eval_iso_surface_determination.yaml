# finding iso surface value for a dataset
# These tests evaluate the agent's ability to recreate scientific figures from papers

# Test: Iso surface determination for a target
- vars:
    question: |
      1. Read the file "data/dataset_003/eval_iso_surface_determination_target_1.txt" to get the target iso-surface values for different tooth structures.
      2. Load data/dataset_003/dataset_003.tif into napari. 
      3. Switch to 3D view mode and set the rendering to iso. 
      4. Find the iso surface value that shows the target clearly.
      5. Rotate the camera to several angles and take a screenshot of the result each time to check if the target structure is clearly visible from different angles.
      6. If the target structure is not clearly visible, adjust the iso surface value and take a screenshot again.
      7. Stop when the target structure is clearly visible or you have tried five different iso surface values.
      8. Save the final screenshot to "eval_iso_surface_determination/screenshot.png".
  assert:
    - type: llm-rubric
      subtype: vision
      value: |
          1. Does the result rendering look similar to ground truth? 
          2. Does the visualization show the target structure clearly?
      gs-file: GS/dataset_003.png
      rs-file: eval_iso_surface_determination/screenshot.png                          
  options:
    cache: false
    runSerially: true